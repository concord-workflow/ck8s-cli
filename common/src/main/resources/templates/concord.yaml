configuration:
  runtime: concord-v2
  events:
    recordTaskInVars: true
    recordTaskOutVars: true
    recordEvents: true
  arguments:
    clusterRequest: <CLUSTER_REQUEST>
  dependencies:
    - "mvn://com.walmartlabs.concord.plugins.basic:http-tasks:1.101.0"
    - "mvn://com.walmartlabs.concord.plugins.basic:resource-tasks:1.101.0"
  meta:
    flow: 'n/a'

profiles:
  remote:
    configuration:
      arguments:
        ignoreMe: "we need remote profile in main concord.yaml"

flows:
  default:
    - if: ${hasVariable('globalExclusiveGroup') && !globalExclusiveGroup.trim().isEmpty()}
      then:
        - task: "lock"
          in:
            name: "${globalExclusiveGroup}"
            scope: "ORG"

    - if: ${hasVariable('flow')}
      then:
        - call: normalFlow
          in:
            flow: ${flow}
      else:
        - set:
            flow: "show"
        - call: show
